---
import Brain from '~icons/lucide/brain'
import Heart from '~icons/lucide/heart'
import Dumbbell from '~icons/lucide/dumbbell'

const tabs = [
    {
        id: 'idiomas',
        label: 'IDIOMAS',
        title: 'Programa Bilíngue e Espanhol',
        content: 'Aos alunos do Ensino Fundamental I e II, o PES English oferece um aprendizado bilíngue natural e imersivo, voltado ao desenvolvimento real da comunicação em inglês. Já o Espanhol da FTD traz uma proposta moderna, culturalmente rica e alinhada à formação de cidadãos globais.',
        image: 'tab-001.webp',
    },
    {
        id: 'socioemocional',
        label: 'SOCIOEMOCIONAL',
        title: 'Escola da Inteligência',
        content: 'Presente semanalmente na grade do Ensino Fundamental I, o programa desenvolve habilidades essenciais, como autocontrole, empatia e resiliência. Desenvolvido por Augusto Cury, sua metodologia é fundamentada em teorias reconhecidas da psicologia e da educação, garantindo consistência pedagógica.',
        image: 'tab-002.webp',
    },
    {
        id: 'extracurriculares',
        label: 'EXTRACURRICULARES',
        title: 'Esporte, Cultura e Desenvolvimento',
        content: 'Aulas de futebol, vôlei, basquete, dança, teatro e o clube de ciências, com vivências práticas no laboratório, são algumas das experiências oferecidas por nós para complementar o aprendizado e estimular as habilidades sociais, físicas e criativas. Também temos o judô, sendo o único incluso na grade horária para o Fundamental I.',
        image: 'tab-003.webp',
    }
]

const tabIcons = [Brain, Heart, Dumbbell]
---

<section class="w-full py-16 lg:py-24 bg-gray-50 methodology-section">
    <div class="container mx-auto px-4">
        <div class="flex justify-center gap-2 md:gap-3 mb-12" role="tablist">
            {tabs.map((tab, index) => {
                const TabIcon = tabIcons[index]
                return (
                    <button
                        type="button"
                        role="tab"
                        aria-selected={index === 0 ? 'true' : 'false'}
                        aria-controls={`panel-${index}`}
                        id={`tab-${index}`}
                        data-index={index}
                        aria-label={tab.label}
                        class={`tab-btn flex items-center gap-2 px-4 md:px-6 py-3 text-xs md:text-sm font-bold uppercase tracking-wider transition-all rounded-lg ${
                            index === 0 ? 'text-white bg-[#00692d]' : 'text-gray-600 bg-white hover:bg-gray-100 border-2 border-gray-200'
                        }`}
                    >
                        <TabIcon width="18" height="18" />
                        <span class="hidden sm:inline">{tab.label}</span>
                    </button>
                )
            })}
        </div>

        <div class="max-w-7xl mx-auto">
            {tabs.map((tab, index) => (
                <div
                    id={`panel-${index}`}
                    role="tabpanel"
                    aria-labelledby={`tab-${index}`}
                    class={`tab-panel ${index === 0 ? '' : 'hidden'}`}
                >
                    <div class="bg-[#00692d] rounded-2xl shadow-xl overflow-hidden lg:overflow-visible">
                        <div class="grid grid-cols-1 lg:grid-cols-5 items-center">
                            <div class="lg:col-span-2 relative lg:min-h-[400px] order-1 lg:order-2 lg:-mr-8 lg:my-8">
                                <img
                                    src={`/${tab.image}`}
                                    alt={tab.title}
                                    class="tab-image w-full h-full object-cover rounded-none lg:rounded-2xl lg:shadow-2xl"
                                />
                            </div>

                            <div class="lg:col-span-3 px-6 pt-4 pb-6 lg:p-12 text-white order-2 lg:order-1">
                                <h3 class="text-3xl lg:text-5xl font-bold mb-6 leading-tight">
                                    {tab.title}
                                </h3>
                                <p class="text-white/90 text-base lg:text-lg leading-relaxed">
                                    {tab.content}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            ))}
        </div>
    </div>
</section>

<script>
    const section = document.querySelector('.methodology-section')
    if (section) {
        const btns = section.querySelectorAll('.tab-btn')
        const panels = section.querySelectorAll('.tab-panel')

        btns.forEach(btn => {
            btn.addEventListener('click', () => {
                const index = parseInt(btn.getAttribute('data-index') || '0')

                btns.forEach(b => {
                    b.setAttribute('aria-selected', 'false')
                    b.classList.remove('text-white', 'bg-[#00692d]')
                    b.classList.add('text-gray-600', 'bg-white', 'hover:bg-gray-100', 'border-2', 'border-gray-200')
                })

                btn.setAttribute('aria-selected', 'true')
                btn.classList.add('text-white', 'bg-[#00692d]')
                btn.classList.remove('text-gray-600', 'bg-white', 'hover:bg-gray-100', 'border-2', 'border-gray-200')

                panels.forEach((p, i) => {
                    if (i === index) {
                        p.classList.remove('hidden')
                    } else {
                        p.classList.add('hidden')
                    }
                })
            })
        })
    }
</script>

